{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\ivan_\\\\OneDrive\\\\GITHUB\\\\nlw3\\\\app\\\\src\\\\pages\\\\CreateOrphanage\\\\OrphanageData\\\\index.tsx\";\nimport React, { useState } from \"react\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Switch from \"react-native-web/dist/exports/Switch\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { Feather } from \"@expo/vector-icons\";\nimport { RectButton } from \"react-native-gesture-handler\";\nimport { useNavigation, useRoute } from \"@react-navigation/native\";\nimport * as ImagePicker from \"expo-image-picker\";\nimport api from \"../../../services/api\";\nimport styles from \"./styles\";\nexport default function OrphanageData() {\n  var _this = this;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      instructions = _useState4[0],\n      setInstrucions = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      about = _useState6[0],\n      setAbout = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      opening_hours = _useState8[0],\n      setOpeningHours = _useState8[1];\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 2),\n      open_on_weekend = _useState10[0],\n      setOpenOnWeekend = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      images = _useState12[0],\n      setImages = _useState12[1];\n\n  var route = useRoute();\n  var navigation = useNavigation();\n  var params = route.params;\n\n  function handleCreateOrphanage() {\n    var _params$position, latitude, longitude, data;\n\n    return _regeneratorRuntime.async(function handleCreateOrphanage$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _params$position = params.position, latitude = _params$position.latitude, longitude = _params$position.longitude;\n            data = new FormData();\n            data.append(\"name\", name);\n            data.append(\"about\", about);\n            data.append(\"latitude\", String(latitude));\n            data.append(\"longitude\", String(longitude));\n            data.append(\"instructions\", instructions);\n            data.append(\"opening_hours\", opening_hours);\n            data.append(\"open_on_weekend\", String(open_on_weekend));\n            images.forEach(function (image, index) {\n              data.append(\"images\", {\n                name: \"image_\" + index + \".jpg\",\n                type: \"image/jpg\",\n                uri: image\n              });\n            });\n            console.log(images);\n            _context.next = 13;\n            return _regeneratorRuntime.awrap(api.post(\"orphanages\", data));\n\n          case 13:\n            navigation.navigate(\"OrphanagesMap\");\n\n          case 14:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function handleSelectedImages() {\n    var _await$ImagePicker$re, status, result, uri;\n\n    return _regeneratorRuntime.async(function handleSelectedImages$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(ImagePicker.requestCameraRollPermissionsAsync());\n\n          case 2:\n            _await$ImagePicker$re = _context2.sent;\n            status = _await$ImagePicker$re.status;\n\n            if (!(status !== \"granted\")) {\n              _context2.next = 7;\n              break;\n            }\n\n            alert(\"Precisamos de sua permissão\");\n            return _context2.abrupt(\"return\");\n\n          case 7:\n            _context2.next = 9;\n            return _regeneratorRuntime.awrap(ImagePicker.launchImageLibraryAsync({\n              allowsEditing: true,\n              quality: 1,\n              mediaTypes: ImagePicker.MediaTypeOptions.Images\n            }));\n\n          case 9:\n            result = _context2.sent;\n\n            if (!result.cancelled) {\n              _context2.next = 12;\n              break;\n            }\n\n            return _context2.abrupt(\"return\");\n\n          case 12:\n            uri = result.uri;\n            setImages([].concat(_toConsumableArray(images), [uri]));\n\n          case 14:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return React.createElement(ScrollView, {\n    style: styles.container,\n    contentContainerStyle: {\n      padding: 24\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, \"Dados\"), React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, \"Nome\"), React.createElement(TextInput, {\n    style: styles.input,\n    value: name,\n    onChangeText: setName,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, \"Sobre\"), React.createElement(TextInput, {\n    style: [styles.input, {\n      height: 110\n    }],\n    multiline: true,\n    value: about,\n    onChangeText: setAbout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, \"Whatsapp\"), React.createElement(TextInput, {\n    style: styles.input,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }\n  }, \"Fotos\"), React.createElement(View, {\n    style: styles.uploadedImagesContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, images.map(function (image) {\n    return React.createElement(Image, {\n      source: {\n        uri: image\n      },\n      style: styles.uploadedImage,\n      key: image,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    });\n  })), React.createElement(TouchableOpacity, {\n    style: styles.imagesInput,\n    onPress: handleSelectedImages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }\n  }, React.createElement(Feather, {\n    name: \"plus\",\n    size: 24,\n    color: \"#15B6D6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  })), React.createElement(Text, {\n    style: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, \"Visita\\xE7\\xE3o\"), React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }\n  }, \"Instru\\xE7\\xF5es\"), React.createElement(TextInput, {\n    style: [styles.input, {\n      height: 110\n    }],\n    multiline: true,\n    value: instructions,\n    onChangeText: setInstrucions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }), React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }\n  }, \"Horario de visitas\"), React.createElement(TextInput, {\n    style: styles.input,\n    value: opening_hours,\n    onChangeText: setOpeningHours,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }), React.createElement(View, {\n    style: styles.switchContainer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.label,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, \"Atende final de semana?\"), React.createElement(Switch, {\n    thumbColor: \"#fff\",\n    trackColor: {\n      false: \"#ccc\",\n      true: \"#39CC83\"\n    },\n    value: open_on_weekend,\n    onValueChange: setOpenOnWeekend,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 9\n    }\n  })), React.createElement(RectButton, {\n    style: styles.nextButton,\n    onPress: handleCreateOrphanage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: styles.nextButtonText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, \"Cadastrar\")));\n}","map":{"version":3,"sources":["C:/Users/ivan_/OneDrive/GITHUB/nlw3/app/src/pages/CreateOrphanage/OrphanageData/index.tsx"],"names":["React","useState","Feather","RectButton","useNavigation","useRoute","ImagePicker","api","styles","OrphanageData","name","setName","instructions","setInstrucions","about","setAbout","opening_hours","setOpeningHours","open_on_weekend","setOpenOnWeekend","images","setImages","route","navigation","params","handleCreateOrphanage","position","latitude","longitude","data","FormData","append","String","forEach","image","index","type","uri","console","log","post","navigate","handleSelectedImages","requestCameraRollPermissionsAsync","status","alert","launchImageLibraryAsync","allowsEditing","quality","mediaTypes","MediaTypeOptions","Images","result","cancelled","container","padding","title","label","input","height","uploadedImagesContainer","map","uploadedImage","imagesInput","switchContainer","false","true","nextButton","nextButtonText"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport {\r\n  ScrollView,\r\n  View,\r\n  StyleSheet,\r\n  Switch,\r\n  Text,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  Image,\r\n} from \"react-native\";\r\nimport { Feather } from \"@expo/vector-icons\";\r\nimport { RectButton } from \"react-native-gesture-handler\";\r\nimport { useNavigation, useRoute } from \"@react-navigation/native\";\r\nimport * as ImagePicker from \"expo-image-picker\";\r\nimport api from \"../../../services/api\";\r\n\r\nimport styles from \"./styles\";\r\n\r\ninterface OrphanageDataRouteParams {\r\n  position: {\r\n    latitude: number;\r\n    longitude: number;\r\n  };\r\n}\r\n\r\nexport default function OrphanageData() {\r\n  const [name, setName] = useState(\"\");\r\n  const [instructions, setInstrucions] = useState(\"\");\r\n  const [about, setAbout] = useState(\"\");\r\n  const [opening_hours, setOpeningHours] = useState(\"\");\r\n  const [open_on_weekend, setOpenOnWeekend] = useState(true);\r\n  const [images, setImages] = useState<string[]>([]);\r\n\r\n  const route = useRoute();\r\n  const navigation = useNavigation();\r\n  const params = route.params as OrphanageDataRouteParams;\r\n\r\n  async function handleCreateOrphanage() {\r\n    const { latitude, longitude } = params.position;\r\n\r\n    const data = new FormData();\r\n\r\n    data.append(\"name\", name);\r\n    data.append(\"about\", about);\r\n    data.append(\"latitude\", String(latitude));\r\n    data.append(\"longitude\", String(longitude));\r\n    data.append(\"instructions\", instructions);\r\n    data.append(\"opening_hours\", opening_hours);\r\n    data.append(\"open_on_weekend\", String(open_on_weekend));\r\n\r\n    images.forEach((image, index) => {\r\n      data.append(\"images\", {\r\n        name: `image_${index}.jpg`,\r\n        type: \"image/jpg\",\r\n        uri: image,\r\n      } as any);\r\n    });\r\n\r\n    console.log(images);\r\n\r\n    await api.post(\"orphanages\", data);\r\n\r\n    navigation.navigate(\"OrphanagesMap\");\r\n  }\r\n\r\n  async function handleSelectedImages() {\r\n    const { status } = await ImagePicker.requestCameraRollPermissionsAsync();\r\n\r\n    if (status !== \"granted\") {\r\n      alert(\"Precisamos de sua permissão\");\r\n      return;\r\n    }\r\n\r\n    const result = await ImagePicker.launchImageLibraryAsync({\r\n      allowsEditing: true,\r\n      quality: 1,\r\n      mediaTypes: ImagePicker.MediaTypeOptions.Images,\r\n    });\r\n\r\n    if (result.cancelled) {\r\n      return;\r\n    }\r\n\r\n    const { uri } = result;\r\n\r\n    setImages([...images, uri]);\r\n  }\r\n\r\n  return (\r\n    <ScrollView\r\n      style={styles.container}\r\n      contentContainerStyle={{ padding: 24 }}\r\n    >\r\n      <Text style={styles.title}>Dados</Text>\r\n\r\n      <Text style={styles.label}>Nome</Text>\r\n      <TextInput style={styles.input} value={name} onChangeText={setName} />\r\n\r\n      <Text style={styles.label}>Sobre</Text>\r\n      <TextInput\r\n        style={[styles.input, { height: 110 }]}\r\n        multiline\r\n        value={about}\r\n        onChangeText={setAbout}\r\n      />\r\n\r\n      <Text style={styles.label}>Whatsapp</Text>\r\n      <TextInput style={styles.input} />\r\n\r\n      <Text style={styles.label}>Fotos</Text>\r\n\r\n      <View style={styles.uploadedImagesContainer}>\r\n        {images.map((image) => {\r\n          return (\r\n            <Image\r\n              source={{ uri: image }}\r\n              style={styles.uploadedImage}\r\n              key={image}\r\n            />\r\n          );\r\n        })}\r\n      </View>\r\n\r\n      <TouchableOpacity\r\n        style={styles.imagesInput}\r\n        onPress={handleSelectedImages}\r\n      >\r\n        <Feather name=\"plus\" size={24} color=\"#15B6D6\" />\r\n      </TouchableOpacity>\r\n\r\n      <Text style={styles.title}>Visitação</Text>\r\n\r\n      <Text style={styles.label}>Instruções</Text>\r\n      <TextInput\r\n        style={[styles.input, { height: 110 }]}\r\n        multiline\r\n        value={instructions}\r\n        onChangeText={setInstrucions}\r\n      />\r\n\r\n      <Text style={styles.label}>Horario de visitas</Text>\r\n      <TextInput\r\n        style={styles.input}\r\n        value={opening_hours}\r\n        onChangeText={setOpeningHours}\r\n      />\r\n\r\n      <View style={styles.switchContainer}>\r\n        <Text style={styles.label}>Atende final de semana?</Text>\r\n        <Switch\r\n          thumbColor=\"#fff\"\r\n          trackColor={{ false: \"#ccc\", true: \"#39CC83\" }}\r\n          value={open_on_weekend}\r\n          onValueChange={setOpenOnWeekend}\r\n        />\r\n      </View>\r\n\r\n      <RectButton style={styles.nextButton} onPress={handleCreateOrphanage}>\r\n        <Text style={styles.nextButtonText}>Cadastrar</Text>\r\n      </RectButton>\r\n    </ScrollView>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}